# 5. 클라우드를 가능하게 하는 기술

## 5.1 광대역 네트워크와 인터넷 아키텍처

소비자는 인터넷, VPN, 전용라인을 이용해 클라우드에 접속할지 선택 가능 → 서비스 품질과 안정성에 영향

### 인터넷 서비스 제공자(ISP)

### 비연결형 패킷 교환(데이터그램 네트워크)

IP 프로토콜을 의미. 목적지 주소. 라우터, 네트워크 디바이스를 통해 패킷을 전달하는 형태

라우팅이라는 것 자체가 path를 정하는 것

### 라우터 기반 상호 접속

### 기술과 사업적 고려 사항

#### 접속 문제

#### 네트워크 대역폭과 대기 시간(시간 지연) 문제

전송 데이터양과 빠른 응답 요구사항이 필요한 app에 중요 요소

종단간 중간 노드를 거칠 때마다 대기 시간은 증가(인터넷 패킷망은 동적 경로 : 안정성, 신뢰성이 떨어짐)

### 클라우드 전달자와 클라우드 제공자 선택

클라우드 환경은 대기 시간에 민감하지 않고 대역폭 요건을 갖는 app에 용이

## 5.2 데이터 센터 기술

AWS에서는 22개의 region 내에 69개의 가용 영역 → 데이터 센터

[AWS 리전 서비스 목록](https://aws.amazon.com/ko/about-aws/global-infrastructure/regional-product-services/?p=ngi&loc=4)

서울 같은 경우 3곳의 데이터 센터가 있다.

### 가상화

가상화를 통해서 전용 서버를 올린다. 물리적인 스펙의 이용률을 극대화시킬 수 있다.

### 표준화와 모듈화

표준화된 하드웨어 모듈 아키텍처 설계로 신속한 확장, 조달, 배포 가능

### 자동화

많은 구성요소들의 신속 관리를 위한 설정 자동화, 복구 자동화 기술을 도입

CM(Configuration Management)

Puppet, Salt, Ansible

클러스터

### 원격 운영과 관리

관리 시간을 최소화하고 편의성 제공

### 높은 가용성

가용성을 유지하기 위한 중복성(이중화) 설계

H.A(High Availability) , 고가용성, 이중화

### 보안 인식 설계와 운영, 관리

물리적/논리적 접근 통제와 데이터 복구 전략 수립

### 시설

전원 이중화, 냉·난방, 통풍, 화재 보호 시설물 등 환경 제어 장치 필요

한전 라인 이상 있으면 UPS

### 컴퓨팅 하드웨어

랙 마운트, 중복 구성 및 핫 스왑 디바이스 사용 권장

### 스토리지 하드웨어

RAID(Redundant Array of Independent Disks), 빠른 복구와 무결성 백업을 위한 snapshot 기술 사용

Storage 관점의 H.A

미러링

숫자로 define 한다.

Disk Array

EMC

장기 보관용은 Archiving

연결 방식에 따라 DAS, NAS, SAN

### 네트워크 하드웨어

subnet으로 분할 관리, VPN, 방화벽, 라우터, 스위치 등으로 구성

### 기타 고려 사항

IT 하드웨어 생명주기가 대략 5~7년 → 운영 관리의 어려움 야기

## 5.3 가상화 기술

- 서버 : VMM / Hypervisor / 가상화 소프트웨어
- 스토리지 : Volume Manager
- 네트워크 : VLAN
- 전원 : 가상 UPS

### 하드웨어 독립성

이관 용이, 하드웨어와 소프트웨어의 호환성 문제 해결, 복제 용이

### 서버 통합

IT 자원 최적화 및 이용률 극대화

### 자원 복제

수평 확장 용이, 디스크 이미지를 통한 복구 용이성

### 운영체제 기반 가상화

type-2, hosted

### 하드웨어 기반 가상화

type-1, bare-metal

bare-metal : 물리적인 시스템에 바로 깔아서 사용

### 가상화 관리

VIM : Virtual Infrastructure Management

### 기타 고려 사항

#### 성능 오버헤드

Full Virtualization vs. Para Virtualization

#### 특정 하드웨어 호환성

CPU 가상화 지원 유무, 최근 CPU에서 지원되는 특정 OS 버전 등

#### 이식성

디스크 이미지 포맷 표준(OVF : Open Virtualization Format) 사용 고려

## 5.4 웹 기술

### 기본 웹 기술

프론트엔드에 사용

- URL : 주소 표현 방식
- HTTP : 기본 통신 Protocol
- 마크업 언어 : 웹 중심 데이터와 메타데이터를 표현하는 수단

### 웹 애플리케이션

웹 기반 기술을 사용하는 분산된 애플리케이션

## 5.5 멀티테넌시 기술

Tenant별 독립성 제공

Tenant는 사용자 그룹

- 사용자 인터페이스
- 비즈니스 프로세스
- 데이터 모델
- 접근 제어

멀티테넌시 애플리케이션 설계

여러 Tenant가 동시에 접근이 가능하나 서로 배타적으로 사용하는 환경 제공

### 기본 특징

- 사용 분리
- 데이터 보안
- 복구 : 테넌트별 독립적
- 애플리케이션 업그레이드 : 애플리케이션 업그레이드에 영향받지 않아야 한다.
- 확장성 : 확장성 있는 설계 → 테넌트 수 증가를 수용할 수 있는 설계
- 사용량 측정
- 데이터 계층 분리

## 5.6 서비스 기술

### 웹 서비스

1세대 핵심 기술

- WSDL(Web Service Description Language, 웹 서비스 기술 언어)
- XML 스키마 정의 언어
- SOAP(Simple Object Access Protocol, 단순 객체 접근 프로토콜)
- UDDI(Universal Description Discovery and Integration, 전역 비즈니스 레지스트리)

### REST 서비스

REST 설계의 6가지 제약

- 클라이언트 서버
- 상태 비보존
- 캐시
- 인터페이스/통일 계약
- 계층적 시스템
- 주문형 코드

### 서비스 에이전트

이벤트 기반 프로그램

### 서비스 미들웨어

## 5.7 사례 연구

여러 서버들이 스토리지 접속 → SAN

## 실습

Amazon Machine Image(AMI)

OS Disk Image

최적화 시킨 것 백업해두기 → 나의 AMI

---

인스턴스 유형 선택

인스턴스 세부 정보

---

태그는 관리 목적

회사의 정책으로 어떤 레이블을 줄 것인지 표준화. 그것에 맞게끔 넣어주면 된다.

---

보안 그룹

일종의 방화벽

호스트 그룹 방화벽, 네트워크 방화벽

클라우드에서는 인스턴스마다 보안 그룹 적용

무조건 줘야한다.

방화벽 : 서비스 포트 같은 것들을 열어준다.

---

새 키 페어 생성

SSH : 데이터를 통신할 때 암호화해서 통신한다.

암호화하기 위한 key를 생성. Data를 주고받을 때에도 암호화를 사용하지만 인증할 때에도 사용할 수 있다.

인증용 key pair 생성

RSA : 비대칭 키 알고리즘

데이터를 암호화하는 키가 있다. 암호화해서 보냈다. 반대쪽에서 복호화

암호화 할 때 키랑 복호화 할 때 키가 다르다. → 비대칭 키

---

XSHELL5

SSH 프로토콜을 지원하는 클라이언트 프로그램

VPC : 가상 네트워크

루트 디바이스 유형 : ebs

ebs가 내부적으로는 장치파일로 연결

시스템에서는 디스크, OS에서는 파일로. 장치 파일

---

퍼블릭 DNS 이름으로도 접근 가능

보안 그룹

시작 시간 → 과금된다.

---

```shell
ls .ssh
cat .ssh/authorized_keys
ip a
```

a : address

---

작업 → 인스턴스 상태 → 중지

종료를 누르면 삭제가 된다.

작업 → 인스턴스 설정 → 인스턴스 유형 변경

Scale Up 방식 → 서비스 다운 타임이 발생

인스턴스 하나에 그 안에 있는 리소스를 향상시키는 것

---

하이퍼바이저 레벨에서 스케줄링

---

작업 → 인스턴스 상태 → 시작

클라우드 기반의 인스턴스는 임시 자원으로 간주

이미지는 백업되어있다. 그것 가지고 얼마든지 똑같은 인스턴스로 올릴 수 있다.

---

작업 → 이미지

수정한 이미지 그대로 올릴 수 있다.

이미지에 대한 백업

함부로 하지 말자. 스토리지도 과금

---

free 명령어 : 메모리 확인

---

micro일 경우에는 메모리가 1기가였지만 small로 바꾸면서 2기가로 변경되었다.

---

탄력적 IP : 고정적인 static한 공인 IP를 사용하고 싶을 경우

---

보안 그룹 클릭해서 들어가기

인바운드 : 가상머신 입장에서 바라봤을 때 패킷이 들어오는 룰

아웃바운드 : 나로부터 패킷이 시작

---

카드로 패킷이 들어옴 → 인바운드

내가 패킷을 생성해서 어딘가에 요청을 하려고 한다 → 아웃바운드

---

방화벽의 일종

---

Host 기반

Network 기반

---

Openstack

---

인바운드

화이트리스트 정책

허용. Allow 정책

White 정책

Black List 정책

---

아웃바운드는 모두 다 allow

---

인바운드가 허용되면 응답은 무조건 허용 → 보안 그룹의 특징

---

네트워크 ACL : Network 방화벽

